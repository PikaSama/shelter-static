/*
 Author: Zorin
 Github: https://github.com/PikaSama
 License: GPL-3.0 License
 Description: Loader of custom config.
 */
(async()=>{await delay(500);const e=localStorage.getItem("newbie"),t=$("head"),a=$("body"),c=document.querySelector("is-palette2");let o,n,i,l,s;const r={click:e=>{c.shadowRoot.querySelectorAll("a")[e].click()},listen:(e,t)=>{c.shadowRoot.querySelectorAll("a")[e].addEventListener("click",t)},accent:e=>{r.listen(e,async()=>{"0"==o&&"pc"!=s&&(await delay(50),r.click(l))})},day:e=>{r.listen(e,()=>{localStorage.setItem("cachedTheme",e),$(".input-radio-night").attr("class","input-radio"),$("textarea.mvsys#night").removeAttr("id"),$(".φbh").removeAttr("id"),l=e})},night:e=>{r.listen(e,()=>{localStorage.setItem("cachedTheme",e),$(".input-radio").attr("class","input-radio-night"),$("textarea.mvsys").attr("id","night"),$(".φbh").attr("id","darkmode"),l=e})}};function d(){null!=e?(r.accent(5),r.accent(6),r.accent(7),r.accent(8),r.accent(9),r.accent(10),r.accent(11),r.accent(12),r.accent(13),r.accent(14),r.accent(15),r.accent(16),r.accent(17),o=localStorage.getItem("sidebar_widget_background"),function(){i=localStorage.getItem("auto_night"),n=parseInt(localStorage.getItem("default_theme"));let e=(new Date).getHours();"1"==i&&(e>=19||e<=5)?r.click(1):r.click(n)}(),function(){let e=parseInt(localStorage.getItem("default_theme_widget"));0==e?r.click(10):e>0&&e<6?(e+=4,r.click(e)):e>=6&&(e+=5,r.click(e))}(),function(){let e=localStorage.getItem("click_effect");"0"==e?a.append('<script src="//cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.3.12/static/clickLove.js"><\/script>'):"1"==e?(a.append('<script src="//cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"><\/script>'),a.append('<script src="//zorin.beaa.cn/test/cb1.js"><\/script>')):a.append('<script src="//zorin.beaa.cn/test/cb2.js"><\/script>')}(),"1"==localStorage.getItem("live2d")&&a.append('<script src="//cdn.jsdelivr.net/gh/PikaSama/live2d-widget@latest/autoload.js"><\/script>'),function(){const e=$(".φee");let t=localStorage.getItem("dynamic_text");if(e.append('<span id="typedtext"></span>'),e.attr("style","height:3rem; display:block; font-size: 110%;"),"1"==t){let e="";async function a(){await fetch("https://v1.hitokoto.cn?c=i").then(e=>e.json()).then(t=>{t.hitokoto=t.hitokoto.slice(0,-1),t.hitokoto=t.hitokoto.replace(/，/g,"，^200"),t.hitokoto=t.hitokoto.replace(/。/g,"。^200"),t.hitokoto=t.hitokoto.replace(/？/g,"？^200"),t.hitokoto=t.hitokoto.replace(/！/g,"！^200"),t.hitokoto=t.hitokoto.replace(/；/g,"；^200"),e+=t.hitokoto+"/"}).catch(e=>{e&&console.error(e)})}async function c(){for(let e=0;e<3;e++)await a()}c().then(()=>{e=e.split("/"),e.pop(),dynamicType(e)})}else if("2"==t){let e,t=(new Date).getDate(),a=(new Date).getMonth()+1,c=(new Date).getFullYear();t<10&&(t="0"+t),a<10&&(a="0"+a);let o=c+"-"+a+"-"+t;console.log(o),$.get("https://sentence.iciba.com/index.php?c=dailysentence&m=getdetail&title="+o,t=>{t.note=t.note.slice(0,-1),t.note=t.note.replace(/，/g,"，^200"),t.note=t.note.replace(/。/g,"。^200"),t.note=t.note.replace(/？/g,"？^200"),t.note=t.note.replace(/！/g,"！^200"),t.note=t.note.replace(/；/g,"；^200"),e=t.content.slice(0,-1)+"/"+t.note,dynamicType(e.split("/"),50,25)},"jsonp")}else dynamicType(["人生是逆流，^200也是随波逐流","神机妙算皆徒劳，^200千般执念终成空","七月初七，^100淮水竹亭，^100鞘笛相偎，^100无怨无悔"])}()):(a.append('<script src="//cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.3.12/static/clickLove.js"><\/script>'),a.append('<script src="//cdn.jsdelivr.net/gh/PikaSama/live2d-widget@latest/autoload.js"><\/script>'))}r.day(0),r.night(1),r.day(2),r.day(3),r.day(4),window.navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?(t.append('<link href="//zorin.beaa.cn/test/radio-mobile.css" rel="stylesheet" />'),s="non-pc"):(t.append('<link href="//zorin.beaa.cn/test/radio.css" rel="stylesheet" />'),s="pc"),null!=c?d():await delay(1e3,d)})();