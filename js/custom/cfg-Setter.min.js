/*
 Author: Zorin
 Github: https://github.com/PikaSama
 License: GPL-3.0 License
 Description: Setter of custom config page.
 */
(async()=>{const a=".Ï†bk.Ï†h.Ï†z h2",e=".Ï†bk.Ï†h.Ï†z h3",i=window.location.pathname,n=$("head"),t=".ns-box.ns-growl.ns-effect-jelly.ns-type-error",p=localStorage.getItem("newbie");let s,l,d,o,b,r,c,u,m;const g=(e,i)=>{$(i).insertAfter(a+":eq("+e+")")},v=(a,i)=>{$(i).insertAfter(e+":eq("+a+")")};function f(a,e){$("input#"+a+"_"+e).attr("checked","")}const _=a=>{$("input#autonight_"+a).click(()=>{s=a})},w=a=>{$("input#theme_"+a).click(()=>{l=a})},y=a=>{$("input#widget_"+a).click(()=>{d=a})},h=a=>{$("input#sidebar_"+a).click(()=>{o=a})},I=a=>{$("input#effect_"+a).click(()=>{b=a})},S=a=>{$("input#live2d_"+a).click(()=>{r=a})},k=a=>{$("input#wordcount_"+a).click(()=>{c=a})},A=a=>{$("input#dynamic_"+a).click(()=>{m=a})};async function N(){await delay(2e3),$("div.loading").attr("style","opacity:0;transition:all 0.5s;"),await delay(600),$(".Ï†ft").attr("style","opacity:1;transition:all 0.8s;"),await delay(900),$("div.loading").remove(),$(".Ï†ft").removeAttr("style")}"/settings"==i&&await async function(){$(".Ï†ft").attr("style","opacity:0;transition:all 0.3s;"),$('<div class="loading"><i><span></span><span></span><span></span><span></span><span></span><span></span></i></div>').insertAfter(".Ï†fs.Ï†f header"),await delay(2e3),null!=p?($("<p>æˆåŠŸè¯»å–é…ç½®æ–‡ä»¶</p><p>å¦‚æœè¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œç‚¹å‡»ä¿å­˜æŒ‰é’®å³å¯ç”Ÿæ•ˆ</p>").insertAfter(a+":eq(0)"),await async function(){s=localStorage.getItem("auto_night"),v(0,'<p>æ˜¯å¦è‡ªåŠ¨åˆ‡æ¢é»‘æš—æ¨¡å¼</p><p>æ³¨æ„ï¼šè‹¥å¼€å¯æ­¤é€‰é¡¹ï¼Œåœ¨é»‘æš—æ¨¡å¼çš„å·¥ä½œæ—¶é—´å†…å°†ä¼šè¦†ç›–é»˜è®¤ä¸»é¢˜ï¼Œè®¾ç½®ä¸ºé»‘æš—ä¸»é¢˜</p><p>é»‘æš—æ¨¡å¼æ—¶é—´æ®µï¼š19:00~6:00</p><div class="input-radio"><input id="autonight_1"type="radio"name="autonight"/><label for="autonight_1"><span>æ˜¯&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="autonight_0"type="radio"name="autonight"/><label for="autonight_0"><span>å¦&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div>'),f("autonight",s),l=localStorage.getItem("default_theme"),v(1,'<p>é»˜è®¤çš„ä¸»é¢˜æ ·å¼ï¼Œå…±3ç§å¯é€‰</p><div class="input-radio"><input id="theme_0"type="radio"name="theme"/><label for="theme_0"><span>é»˜è®¤&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="theme_1"type="radio"name="theme"/><label for="theme_1"><span>é»‘æš—&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="theme_2"type="radio"name="theme"/><label for="theme_2"><span>æ¨±èŠ±&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="theme_3"type="radio"name="theme"/><label for="theme_3"><span>é›¨æ»´&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="theme_4"type="radio"name="theme"/><label for="theme_4"><span>é™ˆå¹´æ—§ä¹¦&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div>'),f("theme",l),d=localStorage.getItem("default_theme_widget"),v(2,'<p>é»˜è®¤çš„å¼ºè°ƒè‰²ä¸»é¢˜ï¼Œä¿®æ”¹è¡Œå†…ä»£ç å—ï¼Œå°åœ†ç‚¹éƒ¨ä»¶ï¼ŒæŒ‰é’®æ¿€æ´»è‰²ï¼Œæ»šåŠ¨æ¡é¢œè‰²ç­‰ï¼Œå¯ä¸ä¸Šé¢çš„ä¸»é¢˜è¿›è¡Œæ­é…ï¼Œå…±æœ‰12ç§é€‰æ‹©</p><p>æ³¨æ„ï¼šèƒŒæ™¯æŒ‡ä¾§è¾¹æ èƒŒæ™¯ï¼Œä»…é€‚ç”¨äºç§»åŠ¨ç«¯ï¼Œæ— ç‰¹åˆ«æ ‡æ³¨çš„å¼ºè°ƒè‰²çš„èƒŒæ™¯ä¸ºçº¯è‰²èƒŒæ™¯</p><div class="input-radio"><input id="widget_0"type="radio"name="widget"/><label for="widget_0"><span>é»˜è®¤(æ¸…æ–°è“)&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_1"type="radio"name="widget"/><label for="widget_1"><span>æ´»åŠ›æ©™(é»‘çœ¼é•œæ©™è‰²åº•èƒŒæ™¯)&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_2"type="radio"name="widget"/><label for="widget_2"><span>DDã®æ¡ƒ(ç²‰è‰²æ¸å˜èƒŒæ™¯)&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_3"type="radio"name="widget"/><label for="widget_3"><span>å¤œã®æµ·(é»‘è‰²æµ·æ´‹èƒŒæ™¯)&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_4"type="radio"name="widget"/><label for="widget_4"><span>åŸºä½¬ç´«&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_5"type="radio"name="widget"/><label for="widget_5"><span>å¤œç©ºè“&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_6"type="radio"name="widget"/><label for="widget_6"><span>å¤©ä¾è“&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_7"type="radio"name="widget"/><label for="widget_7"><span>å¥¥æ‰˜ç»¿&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_8"type="radio"name="widget"/><label for="widget_8"><span>æ¸…æ–°ç»¿&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_9"type="radio"name="widget"/><label for="widget_9"><span>æ¸…æ–°æ©™&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_10"type="radio"name="widget"/><label for="widget_10"><span>æ™®é€šæ©™&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_11"type="radio"name="widget"/><label for="widget_11"><span>é©¬éæ£•&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="widget_12"type="radio"name="widget"/><label for="widget_12"><span>é…·ç‚«é»‘&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div>'),f("widget",d),o=localStorage.getItem("sidebar_widget_background"),v(3,'<p>ä½¿ç”¨å¼ºè°ƒè‰²æ—¶æ˜¯å¦æ›´æ”¹ä¾§è¾¹æ çš„èƒŒæ™¯ä¸ºå¼ºè°ƒè‰²è‡ªå¸¦çš„èƒŒæ™¯</p><p>æ³¨æ„ï¼šæ­¤é€‰é¡¹ä»…é’ˆå¯¹ç§»åŠ¨ç«¯ï¼ŒPCç«¯è®¾ç½®æ­¤é€‰é¡¹æ— æ•ˆ</p><div class="input-radio"><input id="sidebar_1" type="radio" name="sidebar" /><label for="sidebar_1"><span>æ˜¯&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="sidebar_0" type="radio" name="sidebar" /><label for="sidebar_0"><span>å¦&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div>'),f("sidebar",o),u=localStorage.getItem("bqb_url"),$('<p>ä½ å¯ä»¥è‡ªå®šä¹‰è¯„è®ºç³»ç»ŸåŠ è½½çš„è¡¨æƒ…åŒ…ï¼Œä¸€è¡Œå¡«ä¸€ä¸ªé“¾æ¥ï¼Œä¸éœ€è¦å…¶ä»–ç¬¦å·ï¼Œä»¥å…è§£æé”™è¯¯</p><center><textarea class="mvsys" rows="10" style="resize: none;"></textarea></center><p>ç›®å‰åšå®¢è‡ªå¸¦çš„è¡¨æƒ…åŒ…æœ‰ä»¥ä¸‹è¿™äº›ï¼Œå¦‚æœè¦ä½¿ç”¨è¿™äº›è¡¨æƒ…åŒ…ï¼Œè¯·å¡«å…¥â€œhttps://cdn.jsdelivr.net/gh/PikaSama/blog-emoticons@latest/â€ + è¡¨æƒ…åŒ…åå­— å³å¯</p><ul><li><p>BilibiliHotKeyï¼šå“”å“©å“”å“©çƒ­è¯ç³»åˆ—</p></li><li><p>HONKAI3-Crayonï¼šå´©å3 èœ¡ç¬”æ—¥å¸¸ç¯‡</p></li><li><p>HONKAI3-Dailyï¼šå´©å3 æ—¥å¸¸ç¯‡</p></li><li><p>HONKAI3-Durandal-Searchï¼š å´©å3 ç›®æ ‡ï¼å¹½å…°é»›å°”</p></li><li><p>HONKAI3-MEIï¼šå´©å3 èŠ½è¡£çš„å‰‘é“ä¿®è¡Œ</p></li><li><p>HONKAI3-NEWYEAR-2019ï¼šå´©å3 2019æ–°å¹´</p></li><li><p>HONKAI3-Pureï¼šå´©å3 çº¯è‰²æ—¥å¸¸ç¯‡</p></li><li><p>HONKAI3-Stanï¼šå´©å3 å²ä¸¹</p></li><li><p>HONKAI3-Starï¼šå´©å3 è§‚æ˜Ÿç¯‡</p></li><li><p>HONKAI3-AIChanï¼šå´©å3 çˆ±é…±</p></li><li><p>Mafumafuï¼šMafumafu Animation sticker (cat)</p></li><li><p>Menhera-chanï¼šä¸ƒæ¿‘èƒ¡æ¡ƒç³»åˆ—è¡¨æƒ…åŒ…</p></li><li><p>Sweetie-Bunnyï¼šã†ã•ã¿ã¿å°‘å¥³</p></li><li><p>Coolapkï¼šé…·å®‰</p></li><li><p>Arcaeaï¼šArcaeaè¡¨æƒ…åŒ…</p></li><li><p>Snow-Mikuï¼šSnow Mikué›ªåˆéŸ³è¡¨æƒ…åŒ…</p></li><li><p>Yurui-Nekoï¼šYurui-Nekoè¡¨æƒ…åŒ…</p></li><li><p>bilibilitvï¼šå“”å“©å“”å“©å°ç”µè§†ç³»åˆ—\t</p></li><li><p>bilibili2233ï¼šå“”å“©å“”å“©2233å¨˜ç³»åˆ—</p></li><li><p>aodamiaoï¼šaodamiaoå—·å¤§å–µ</p></li></ul><p>å¦‚æœä½ æƒ³åŠ å…¥è‡ªå·±çš„è¡¨æƒ…åŒ…ï¼Œè¯·è§<a href="https://github.com/MiniValine/MiniValine/blob/master/.github/FAQ.md#how-to-customize-emoticons">æ­¤æ–‡æ¡£</a></p><p>æ¨èä½¿ç”¨é¡¹ç›® <a href="https://github.com/PikaSama/blog-emoticons/">Blog Emoticons</a>ä¸€é”®ç”Ÿæˆè¡¨æƒ…åŒ…åˆ—è¡¨(å†æ¬¡ç¡¬å¹¿)</p>').insertAfter(a+":eq(2)"),$("textarea.mvsys").val(u),b=localStorage.getItem("click_effect"),g(3,'<p>é»˜è®¤çš„ç‚¹å‡»ç‰¹æ•ˆï¼Œå…±ä¸‰ç§å¯é€‰</p><div class="input-radio"><input id="effect_0" type="radio" name="clickeffect" /><label for="effect_0"><span>çˆ±å¿ƒ&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="effect_1" type="radio" name="clickeffect" /><label for="effect_1"><span>ç²’å­æ³¢åŠ¨&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="effect_2" type="radio" name="clickeffect" /><label for="effect_2"><span>ç²’å­çˆ†ç‚¸&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div>'),f("effect",b),r=localStorage.getItem("live2d"),g(4,'<p>æ˜¯å¦å¯ç”¨Live2dçœ‹æ¿å¨˜</p><p>å‘å‘ï¼Œè¿™ä¹ˆKawaiiçš„çœ‹æ¿å¨˜ï¼Œä½ ä¸ä¼šå…³æ‰çš„ï¼Œå¯¹å§å¯¹å§?</p><div class="input-radio"><input id="live2d_1" type="radio" name="live2d" /><label for="live2d_1"><span>æ˜¯&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="live2d_0" type="radio" name="live2d" /><label for="live2d_0"><span>å¦&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div>'),f("live2d",r),c=localStorage.getItem("wordcount_mode"),g(5,'<p>ç»Ÿè®¡åŠŸèƒ½çš„æ ·å¼</p><div class="input-radio"><input id="wordcount_0"type="radio"name="wordcount"/><label for="wordcount_0"><span>å­—æ•°-ä»£ç æ•°-é˜…è¯»æ—¶é—´-è®¿é—®ç»Ÿè®¡&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="wordcount_1"type="radio"name="wordcount"/><label for="wordcount_1"><span>å­—æ•°(åŒ…å«ä»£ç æ•°)-é˜…è¯»æ—¶é—´-è®¿é—®ç»Ÿè®¡&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="wordcount_2"type="radio"name="wordcount"/><label for="wordcount_2"><span>ä¸»é¢˜è‡ªå¸¦æ ·å¼(ç®€æ´)</span></label></div>'),f("wordcount",c),m=localStorage.getItem("dynamic_text"),g(6,'<p>åŠ¨æ€æ–‡å­—æ¥æº</p><div class="input-radio"><input id="dynamic_0"type="radio"name="dynamic"/><label for="dynamic_0"><span>åšå®¢è‡ªå¸¦ï¼ˆå›ºå®šï¼‰&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="dynamic_1"type="radio"name="dynamic"/><label for="dynamic_1"><span>ä¸€è¨€APIï¼ˆè¯—å¥ï¼Œå¯å˜ï¼‰&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div><div class="input-radio"><input id="dynamic_2"type="radio"name="dynamic"/><label for="dynamic_2"><span>é‡‘å±±è¯éœ¸APIï¼ˆæ¯æ—¥ä¸€å¥ï¼Œå¯å˜ï¼‰&nbsp;&nbsp;&nbsp;&nbsp;</span></label></div>'),f("dynamic",m),document.querySelector("is-palette2").shadowRoot.querySelectorAll("a")[parseInt(localStorage.getItem("cachedTheme"))].click(),console.log("theme clicked"+(new Date).getTime()),$('<div class="button-save"><span>ä¿å­˜<i class="ri-save-3-line"></i></span></div>').insertAfter($(":radio:eq(32)").parent()),await async function(){_(0),_(1),w(0),w(1),w(2),w(3),w(4),y(0),y(1),y(2),y(3),y(4),y(5),y(6),y(7),y(8),y(9),y(10),y(11),y(12),h(0),h(1),I(0),I(1),I(2),S(0),S(1),k(0),k(1),k(2),A(0),A(1),A(2),$(".button-save").click(async()=>{u=$("textarea.mvsys").val(),localStorage.setItem("auto_night",s),localStorage.setItem("default_theme",l),localStorage.setItem("default_theme_widget",d),localStorage.setItem("sidebar_widget_background",o),localStorage.setItem("click_effect",b),localStorage.setItem("live2d",r),localStorage.setItem("wordcount_mode",c),localStorage.setItem("bqb_url",u),localStorage.setItem("dynamic_text",m),$(".button-save").attr("class","button-save-disabled"),await async function(){null==document.querySelector(t)?n.append('<link id="jelly" href="//cdn.jsdelivr.net/gh/PikaSama/shelter-images@1.3.12/static/ns-style-growl.css" rel="stylesheet">'):null!=document.querySelector(t+".ns-show")?($(t).attr("id","canceled"),await delay(500),$(t).remove()):$(t).remove()}(),await async function(){await delay(1e3),customNtf({text:'<p>ğŸ””ã€æ¶ˆæ¯ã€‘<br />ä½ çš„é…ç½®æ–‡ä»¶ä¿å­˜æˆåŠŸå•¦~<br />åšå®¢å°†ä¼šåœ¨å‡ ç§’ååˆ·æ–°é¡µé¢ï¼Œè¯·è€å¿ƒç­‰å¾…~<br />æ— æ³•åˆ·æ–°ï¼Ÿè¯•è¯•&nbsp;&nbsp;<a href="https://shelter.beaa.cn/settings">æ‰‹åŠ¨åˆ·æ–°</a></p>',layout:"growl",effect:"jelly",ttl:4e3}),await delay(3e3),window.location.reload()}()})}(),await N()}()):($('<p>è¯»å–ç”¨æˆ·é…ç½®æ–‡ä»¶å¤±è´¥ï¼šæœªæ»¡è¶³è¯»å–æ¡ä»¶ï¼Œè¯•è¯• æŸ¥çœ‹<a href="/help">ä½¿ç”¨æ•™ç¨‹</a></p>').insertAfter(a+":eq(0)"),await N(),$(a+":gt(0)").remove(),$(e).remove())}()})();